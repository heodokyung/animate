<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>재료 쌓기 애니메이션</title>
  <style>
    body,html {
      margin: 0;
      background: #fdf9e6;
      overflow: hidden;
      font-family: sans-serif;
    }
    img {width:100%;}

    .container {
      position: relative;
      width: 100%;
      height: 100vh;
      text-align: center;
      padding-top: 80px;
    }

    /* 애니메이션 */
    @keyframes updown__motion {
        0% {transform: translateY(0);}
        100% {transform: translateY(2vw);}
    }
    
    @keyframes fall {
        0% { opacity: 0; transform: translate(0,0); }
        20% { opacity: 1; }
        100% { opacity: 1; transform: translate(var(--x), var(--y)) rotate(var(--r)); }
    }

    /* @keyframes spread {
        0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0.2;
        }
        60% {
        opacity: 1;
        }
        100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0;
        }
    } */
    
    /* bowl 퍼짐 효과 */
    @keyframes spread {
        0%   { transform: translateX(-50%) scale(0); opacity: 0.2; }
        60%  { transform: translateX(-50%) scale(1); opacity: 1; }
        100% { transform: translateX(-50%) scale(1.2); opacity: 0; }
    }

    .title__wrap {position: absolute; top:7%; left: 50%; transform: translateX(-50%); z-index: 15;}
    .title {width: 40vw; text-align: center; left: 50%; position: relative; transform: translateX(-50%); margin-top:2vw;}
    .sub__title {width: 46vw; text-align: center; left: 50%; position: relative; transform: translateX(-50%); }
    .sub__title div {animation: updown__motion 0.8s linear 0s infinite alternate;}
    .bowl__wrap {position: absolute; bottom: 18%; width:100%;}
    .bowl__wrap .bowl__img {width: 70vw; text-align: center; left: 50%; position: relative; transform: translateX(-50%); z-index:20;}
    .bowl__wrap .bowl__animate {position: absolute; top:-22vw; left: 50%; width: 93vw; transform: translateX(-50%) scale(0); opacity: 0;}


    .bowl__animate.active {
        animation: spread 0.8s ease-out forwards;
    }
    .item__common {position: absolute; opacity: 0; animation: fall 1.2s ease-in-out forwards;}

    /* 이미지별로 위치 지정 */
    .item__wrap {position: absolute; top:5vw; left: 50%; transform: translateX(-50%); width: 100%; height: 100%;}
    .item1 {width: 32.91vw; --x: 21vw; --y: 62vw; --r: 0deg; }
    .item2 {width: 33.47vw; --x:-60px; --y:320px; --r:0deg; }
    .item3 {width: 15.83vw; --x:-30px; --y:330px; --r:0deg; }
    .item4 {width: 11.25vw; --x:0px; --y:340px; --r:0deg; }
    .item5 {width: 29.02vw; --x:30px; --y:330px; --r:0deg; }
    .item6 {width: 29.02vw; --x:60px; --y:320px; --r:0deg; }
    .item7 {width: 15vw; --x:90px; --y:300px; --r:0deg; }
    .item8 {width: 16.52vw; --x:-45px; --y:310px; --r:0deg; }
    .item9 {width: 11.25vw; --x:-45px; --y:310px; --r:0deg; }
    .item10 {width: 9.16vw; --x:-45px; --y:310px; --r:0deg; }
    .item11 {width: 23.88vw; --x:-45px; --y:310px; --r:0deg; }
    .item12 {width: 8.19vw; --x:45px; --y:310px; --r:0deg; }
    .item13 {width: 6.94vw; --x:45px; --y:310px; --r:0deg; }
  </style>
</head>
<body>
  <div class="container">
    <article class="event-cont evt-cont00">
        <div class="title__wrap">
            <div class="sub__title">
                <div>
                    <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/img_e_title_sub.png" alt="" />
                </div>
            </div>
            <p class="title">
                <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/img_e_title.png" alt="" />
            </p>
        </div>
        <div class="visual">
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/bg_e_mo_01.jpg" alt="" />
        </div>
        <div class="bowl__wrap">
            <div class="bowl__img">
                <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/img_e_bowl.png" alt="" />
            </div>
            <i class="bowl__animate">
                <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/img_ani_1.png" alt="" />
            </i>
        </div>
        <div class="item__wrap">
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_1.png" class="item__common item1" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_2.png" class="item__common item2" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_3.png" class="item__common item3" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_4.png" class="item__common item4" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_5.png" class="item__common item5" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_6.png" class="item__common item6" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_7.png" class="item__common item7" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_8.png" class="item__common item8" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_9.png" class="item__common item9" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_10.png" class="item__common item10" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_11.png" class="item__common item11" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_12.png" class="item__common item12" />
            <img src="https://www.cjthemarket.com/design/cjom/event/2025/04/ico_item_13.png" class="item__common item13" />
        </div>
    </article>

  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const ingredients = document.querySelectorAll('.item__wrap .item__common');
      const bowlDrop = document.querySelector('.bowl__animate');
  
      const title = document.querySelector('.title');
      const titleRect = title.getBoundingClientRect();
  
      // 애니메이션 트리거 함수
      function startDropAnimation() {
        ingredients.forEach((img, i) => {
          // 초기 위치로 설정 (타이틀 중앙 기준)
          // img.style.left = `${titleRect.left + titleRect.width / 2 - img.offsetWidth / 2}px`;
          // img.style.top = `${titleRect.top - 40}px`;
          img.style.opacity = 0;
  
          // 트리거 위해 재적용
          img.style.animation = 'none';
          img.offsetHeight; // 강제 리플로우
          img.style.animation = 'fall 1s ease-out forwards';
  
          // 그룹 딜레이 설정
          let delay = 0;
          if (i <= 3) delay = Math.random() * 0.1;
          else if (i <= 6) delay = 0.2 + Math.random() * 0.1;
          else if (i <= 9)delay = 0.3 + Math.random() * 0.1;
          else delay = 0.4 + Math.random() * 0.1;
  
          img.style.animationDelay = `${delay}s`;
        });
  
        // bowl__animate 터지는 모션은 마지막 아이템 떨어진 후 실행
        setTimeout(() => {
          bowlDrop.classList.add('active');
  
          // 퍼짐 후 초기화
          setTimeout(() => {
            bowlDrop.classList.remove('active');
          }, 800);
        }, 1600); // 마지막 아이템 낙하 시간 기준
  
        // 전체 반복 타이밍
        setTimeout(() => {
          startDropAnimation(); // 재귀 호출
        }, 3000); // 전체 루프 주기
      }
  
      // 시작!
      startDropAnimation();
    });
</script>
</body>
</html>
